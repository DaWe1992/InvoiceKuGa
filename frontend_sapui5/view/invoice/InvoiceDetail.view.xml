<mvc:View
	controllerName="com.danielwehner.invoicekuga.controller.invoice.InvoiceDetail"
	xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"
	xmlns:layout="sap.ui.layout" xmlns:form="sap.ui.layout.form">

	<Page
		showHeader="false"
		class="sapUiResponsiveContentPadding">
		<content>

			<!-- Invoice head data -->
			<Panel
				expandable="true"
				expanded="{= !${device>/system/phone}}"
				backgroundDesign="Transparent">

				<headerToolbar>
					<Toolbar height="3rem">
						<core:Icon src="sap-icon://travel-expense-report" size="1.5rem"/>
						<Title text="{i18n>Invoice.panel.head.title}"/>
					</Toolbar>
				</headerToolbar>

				<!-- Invoice form -->
				<content>
					<form:SimpleForm editable="true" layout="ResponsiveGridLayout"
						labelSpanXL="4" labelSpanL="4" labelSpanM="12" labelSpanS="12"
						adjustLabelSpan="false"
						emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
						columnsXL="2" columnsL="2" columnsM="2"
						singleContainerFullSize="false" >
						<form:content>
							<!-- Invoice head data -->
							<core:Title text="{i18n>Invoice.form.section.head}"/>
							<Label text="{i18n>Invoice.id}"/>
							<Input value="{/invoice/id}"/>
							<Label text="{i18n>Invoice.description}"/>
							<Input value="{/invoice/description}"/>
							<Label text="{i18n>Invoice.date}"/>
							<DatePicker
								value="{/invoice/date}"
								valueFormat="yyyy-MM-dd"
								displayFormat="long"
							/>
							<Label text="{i18n>Invoice.room}"/>
							<Select id="invoiceRoom" selectedKey="{/invoice/room}">
		    					<items>
		    						<core:Item text="{i18n>Invoice.room.rossini}" key="rossini"/>
		    						<core:Item text="{i18n>Invoice.room.littmann}" key="littmann"/>
		    					</items>
		    				</Select>
							<Label text="{i18n>Invoice.comments}"/>
							<Input value="{/invoice/comments}"/>

							<!-- ************************************************************ -->
							<!-- Invoice customer data -->
							<core:Title text="{i18n>Invoice.form.section.customer}"/>
							<Label text="{i18n>Customer.id}"/>
		                    <Input value="{/customer/id}" enabled="{settings>/enabled}"/>
							<Label text="{i18n>Customer.address}"/>
		                    <Input value="{/customer/address}" enabled="false"/>
		                    <Label text="{i18n>Customer.firstname} / {i18n>Customer.lastname}"/>
		                    <Input value="{/customer/firstname}" enabled="false"/>
		                    <Input value="{/customer/lastname}" enabled="false">
		                        <layoutData>
		                            <layout:GridData span="XL1 L4 M6 S12"/>
		                        </layoutData>
		                    </Input>
		                    <Label text="{i18n>Customer.street}"/>
		                    <Input value="{/customer/street}" enabled="false"/>
		                    <Label text="{i18n>Customer.zip} / {i18n>Customer.city}"/>
		                    <Input value="{/customer/zip}" enabled="false">
		                        <layoutData>
		                            <layout:GridData span="XL1 L3 M4 S12"/>
		                        </layoutData>
		                    </Input>
		                    <Input value="{/customer/city}" enabled="false"/>
						</form:content>
					</form:SimpleForm>
				</content>
			</Panel>

			<!-- ************************************************************ -->
			<!-- Invoice positions -->
			<Panel
				expandable="true"
				expanded="false"
				backgroundDesign="Transparent"
				class="sapUiNoContentPadding">

				<headerToolbar>
					<Toolbar height="3rem">
						<core:Icon src="sap-icon://sales-order-item" size="1.5rem"/>
						<Title text="{i18n>Invoice.panel.positions.title}"/>
						<ToolbarSpacer/>
					</Toolbar>
				</headerToolbar>

				<content>
					<!-- Invoice positions table -->
					<Table
						items="{
							path: '/invoice/positions'
						}"
						inset="false"
						growing="true"
						growingThreshold="3">
						<columns>
							<Column width="40%"><Text text="{i18n>Invoice.positions.pos}"/></Column>
							<Column width="10%" hAlign="End">
								<Text text="{i18n>Invoice.positions.quantity}"/>
							</Column>
							<Column width="10%" minScreenWidth="Desktop" hAlign="End">
								<Text text="{i18n>Invoice.positions.unitprice}"/>
							</Column>
							<Column width="10%" hAlign="End">
								<Text text="{i18n>Invoice.positions.net}"/>
							</Column>
							<Column width="10%" minScreenWidth="Desktop" hAlign="End">
								<Text text="{i18n>Invoice.positions.vatrate}"/>
							</Column>
							<Column width="10%" hAlign="End">
								<Text text="{i18n>Invoice.positions.vat}"/>
							</Column>
							<Column width="10%" hAlign="End">
								<Text text="{i18n>Invoice.positions.gross}"/>
							</Column>
						</columns>
						<items>
							<ColumnListItem>
								<cells>
									<Text text="{pos}"/>
									<Text textAlign="Right" text="{
										path: 'qty',
										type: 'sap.ui.model.type.Integer'
									}"/>
									<Text textAlign="Right" text="{
										path: 'unitprice',
										type: 'sap.ui.model.type.Float',
										formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
									}"/>
									<Text textAlign="Right" text="{
										path: 'net',
										type: 'sap.ui.model.type.Float',
										formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
									}"/>
									<Text textAlign="Right" text="{vatrate}"/>
									<Text textAlign="Right" text="{
										path: 'vat',
										type: 'sap.ui.model.type.Float',
										formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
									}"/>
									<Text textAlign="Right" text="{
										path: 'gross',
										type: 'sap.ui.model.type.Float',
										formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
									}"/>
								</cells>
							</ColumnListItem>
						</items>
					</Table>
				</content>
			</Panel>

			<!-- ************************************************************ -->
			<!-- Sums -->
			<HBox class="sapUiSmallMarginTop" width="100%">
				<VBox class="sapUiSmallMarginEnd">
					<Label text="{i18n>Invoice.positions.sums.net}"/>
					<Input enabled="false" value="{
						path: '/invoice/sums/net',
						type: 'sap.ui.model.type.Float',
						formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
					}"/>
				</VBox>
				<VBox class="sapUiSmallMarginEnd">
					<Label text="{i18n>Invoice.positions.sums.vat1}"/>
					<Input enabled="false" value="{
						path: '/invoice/sums/vat1',
						type: 'sap.ui.model.type.Float',
						formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
					}"/>
				</VBox>
				<VBox class="sapUiSmallMarginEnd">
					<Label text="{i18n>Invoice.positions.sums.vat2}"/>
					<Input enabled="false" value="{
						path: '/invoice/sums/vat2',
						type: 'sap.ui.model.type.Float',
						formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
					}"/>
				</VBox>
				<VBox class="sapUiSmallMarginEnd">
					<Label text="{i18n>Invoice.positions.sums.gross}"/>
					<Input enabled="false" value="{
						path:'/invoice/sums/gross',
						type: 'sap.ui.model.type.Float',
						formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}
					}"/>
				</VBox>
			</HBox>
		</content>

		<footer>
			<Toolbar>
				<content>
					<Button press="" icon="sap-icon://print"/>
					<ToolbarSpacer>
						<layoutData>
							<OverflowToolbarLayoutData priority="NeverOverflow" minWidth="20px"/>
						</layoutData>
					</ToolbarSpacer>
					<Button text="{i18n>Misc.save}" type="Accept" press=""></Button>
					<Button text="{i18n>Misc.delete}" type="Reject" press=""></Button>
				</content>
			</Toolbar>
		</footer>
	</Page>
</mvc:View>
